{% extends 'base.html' %}

{% block base %}

<div class="container-fluid p-3">
    <h2 class="text-center">Todo List</h2>
    {% if messages %}
    {% for i in messages %}
    {% if i.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
    <div class="alert alert-success">
        {{ i }}
    </div>
    {% endif %}
    {% if i.level == DEFAULT_MESSAGE_LEVELS.INFO %}
    <div class="alert alert-info">
        {{ i }}
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}
    <table class="table table-dark table-bordered align-middle table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>Final Date</th>
                <th>status</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for i in data %}
            <tr>
                <td>{{i.title}}</td>
                <td>{{i.description}}</td>
                <td>{{i.last_date}}</td>
                <td>
                    {% if i.status == 'Incomplete' %}
                    <a href="{% url 'statusupdate' i.id 'Completed' %}" class="btn btn-outline-success">Completed</a><br><br>
                    <a href="{% url 'statusupdate' i.id 'Cancelled' %}" class="btn btn-outline-danger">Cancelled</a>
                    {% else %}
                        {% if i.status == 'Completed' %}
                            <h6 class="text-success">{{i.status}}</h6>
                        {% else %}
                            <h6 class="text-danger">{{i.status}}</h6>
                        {% endif %}
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'tddelete' i.id %}" class="btn btn-danger m-1">Delete</a>
                    <a href="{% url 'todoedit' i.id %}" class="btn btn-info m-1">Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock base %}